"use strict";var shop={eventListeners:function eventListeners(){$(document).on("click",".modal .catalog-element-addtocart input",function(e){e.preventDefault();var product_id=$(this).data("product-id");var quantity=$(this).data("quantity");shop.addtocart(product_id,quantity)});$(document).on("click",".quan",function(){var step=$("input#box-1").is(":checked")?1:2;var input=$(this).siblings("input");var value=parseInt(input.val());if($(this).hasClass("quan-plus")){while(step){value++;step--}}else if($(this).hasClass("quan-minus")){while(step){value--;step--}value=value<=0?1:value}else{return false}input.val(value);$(this).closest(".catalog-element-wrapper").find(".catalog-element-addtocart input").attr("data-quantity",value)})},addtocart:function addtocart(product_id,quantity){$.ajax({url:"/ajax/add_to_cart.php",method:"post",data:{product_id:product_id,quantity:quantity}}).done(function(response){var result=parseInt(JSON.parse(response));var title=result>0?"Корзина":"Ошибка";var body=result>0?"Товар добавлен в корзину.":"Ошибка при добавлении товара в корзину.";openInfoModal(title,body)}).fail(function(error){console.error(error)})}};shop.eventListeners();